---
title: 协作模式
date: 2025-04-11 18:32:09
permalink: /cn/Zadig v4.2/api/collaboration/
---

## 新建协作模式

### 请求

```
POST /openapi/collaborations
```

**Body 参数说明**

| 参数名        | 说明                      | 类型                                              | 必填 |
| ------------- | ------------------------- | ------------------------------------------------- | ---- |
| `project_key` | 项目标识                  | string                                            | 是   |
| `name`        | 协作模式名称              | string                                            | 是   |
| `recycle_day` | 资源回收天数，0表示不回收 | int                                               | 否   |
| `user_ids`    | 用户 ID 列表              | []string                                          | 否   |
| `group_ids`   | 用户组 ID 列表            | []string                                          | 否   |
| `workflows`   | 工作流列表                | [][CollaborationWorkflow](#CollaborationWorkflow) | 否   |
| `envs`        | 环境列表                  | [][CollaborationEnv](#CollaborationEnv)           | 否   |

<h4 id="CollaborationWorkflow">CollaborationWorkflow 参数说明</h4>

| 参数名               | 说明                                                                | 类型     | 必填 |
| -------------------- | ------------------------------------------------------------------- | -------- | ---- |
| `name`               | 工作流标识                                                          | string   | 是   |
| `collaboration_type` | 协作类型，share或new                                                | string   | 是   |
| `verbs`              | 操作权限，get_workflow、edit_workflow、run_workflow、debug_workflow | []string | 是   |

<h4 id="CollaborationEnv">CollaborationEnv 参数说明</h4>

| 参数名               | 说明                                                                         | 类型     | 必填 |
| -------------------- | ---------------------------------------------------------------------------- | -------- | ---- |
| `name`               | 环境名称                                                                     | string   | 是   |
| `collaboration_type` | 协作类型，share或new                                                         | string   | 是   |
| `verbs`              | 操作权限，get_environment、config_environment、manage_environment、debug_pod | []string | 是   |

**Body 参数示例**

::: details
``` json
{
    "envs": [
        {
            "collaboration_type": "share",
            "name": "dev",
            "verbs": [
                "get_environment",
                "config_environment",
                "manage_environment",
                "debug_pod"
            ]
        }
    ],
    "group_ids": [
        "f0035a8b-66a7-11f0-89e1-1631ef6b4739"
    ],
    "name": "api-test",
    "project_key": "multi-chart",
    "recycle_day": 0,
    "user_ids": [
        "00abf4dc-5c6d-11f0-8608-3abfaba6efff"
    ],
    "workflows": [
        {
            "collaboration_type": "share",
            "name": "multi-chart-ops-workflow",
            "verbs": [
                "edit_workflow",
                "run_workflow",
                "debug_workflow"
            ]
        },
        {
            "collaboration_type": "new",
            "name": "test-ops",
            "verbs": [
                "get_workflow",
                "edit_workflow",
                "run_workflow",
                "debug_workflow"
            ]
        }
    ]
}
```
:::


### 返回

```json
{
    "message": "success"
}
```

## 删除协作模式

###  请求

```
DELETE /openapi/collaborations/<协作模式名称>?projectKey=<项目标识>
```

### 返回

```json
{
    "message": "success"
}
```
