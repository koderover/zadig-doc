---
title: v3.4.1 Release Notes
date: 2025-07-02 13:28:10
permalink: /cn/Zadig v3.4/release-notes/v3.4.1/
---

2025 年 7 月 2 日，Zadig 正式发布 v3.4.1 版本。

## 功能列表

**工作流及发布计划**
- 工作流支持 Apollo 配置回滚
- 发布计划完成后显示完整输入信息
- 发布计划中失败的任务添加重试按钮
- 主机部署支持自定义变量
- 通知中部署任务添加镜像版本信息
- 审批详情中添加环境信息
- <span v-pre>`{{.job.<DeployJobName>.SERVICES}}` </span> 改为运行时可用变量
- 工作流构建支持过滤 Tag
  
**环境与服务**
- K8s YAML 服务从代码库同步支持自定义服务名称
- 生产服务使用模板支持批量导入
- 环境搜索支持通过环境名称和环境别名搜索
- 环境删除服务时提供不删资源选项
  
**系统设置及集成**
- 代码源支持关闭 ssl 校验
- 系统集成添加连通性测试
- 飞书审批回调支持 SSE 长连接
- 用户组支持配置系统角色
- 集群管理支持火山引擎 VKE
- 构建任务支持特权模式
- 配置变更支持集成 MSE nacos 
  
**问题修复及系统优化**
- 工作流触发器重构，提升可用性
- 修复未配置镜像仓库时新建主机项目环境报错问题
- 修复手动执行阶段或重试工作流时共享存储失效问题
- 修复 dind 重启后重复挂盘问题
- 修复工作流记录无法通过服务组件筛选问题
- 修复 statefulset 资源部署任务检查不准确问题
- 修复构建中自定义镜像时在通知中显示不正确问题
- 修复aslan 更新后代理连接的集群报错问题
- 修复修改项目角色描述时为空问题
- 修复主机部署中使用 SSH 方式拉取代码失败问题
- 修复构建在主机上执行时 IMAGE 变量无法修改问题
- 若干交互优化


## 业务变更声明
- 在 Zadig 版本升级前对 Nacos 配置所做的修改，升级后无法通过回滚恢复。
  - 原因：Zadig 新版本对 Nacos 配置变更做了数据结构调整。

## 版本升级过程

::: warning
若使用的 MongoDB 以 Replica Set 模式部署，请确认未使用 admin/local/config/test 等系统库作为 Zadig 的业务库；如有使用，请先手动迁移数据。
如果当前系统版本 < v3.4.0，请先升级到 v3.4.0，具体升级过程参见 [v3.4.0 升级方式](/cn/Zadig%20v3.4/release-notes/v3.4.0/#版本升级过程)，再按照以下方式升级到 v3.4.1
:::

请根据不同的安装方式执行对应的升级过程：

- 使用脚本命令安装：升级参考[文档](/cn/Zadig%20v3.4/install/helm-deploy/#升级)
- 使用 Helm 命令安装：升级参考[文档](/cn/Zadig%20v3.4/install/helm-deploy/#升级)
- 官方通道安装：升级参考[文档](/cn/Zadig%20v3.4/stable/install/#升级)

## 升级注意事项

升级时，需调整保存的 Zadig values.yaml 中镜像配置。除 dex 组件外，`所有 image.repository 字段`需移除镜像仓库地址前缀，仅保留镜像名称。

例如：

```
# 升级前（需修改）  
image:  
  repository: koderover.tencentcloudcr.com/koderover-public/cron

# 升级后（正确格式）  
image:  
  repository: cron
```