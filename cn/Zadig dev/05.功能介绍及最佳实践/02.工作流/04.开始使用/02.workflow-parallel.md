---
title: 工作流任务的并发运行
date: 2021-03-16 17:43:52
permalink: /dev/workflow/parallel/
---
本文主要介绍产品工作流任务的并发运行能力。
## 同一工作流同一任务的并发

Zadig 系统的工作流可同时触发多个服务的部署更新。仅执行一次工作流，即可触发多个服务被同时执行`构建`->`部署`->`测试`->`分发`流程，不同服务的构建发布过程彼此独立互不干扰，如下图所示。

![工作流执行顺序](../../../../_images/workflow_parallel_2.png)
## 同一工作流不同任务的并发
::: tip
Zadig 构建并发数依赖系统资源的上限，需要管理员在系统设置针对自身情况设置合理的 [任务并发数](/dev/settings/system-settings/#任务并发数设置)。
:::

Zadig 同一工作流任务支持并发执行，在工作流中选择`并发运行`，可以开启工作流任务的并发能力。当多个开发者先后触发该工作流：

- 触发的工作流任务里包括部署阶段，则更新不同的服务时，产生的多个工作流任务将会并发执行，开发者之间无需等待，最大限度地提升协作效率。
- 触发的工作流任务里不包含部署阶段，则即使使用工作流更新相同的服务，同一工作流的多个任务也可并发执行。

![工作流并发配置](../../../../_images/workflow_parallel_1.png)

目前同一个工作流多个不同的任务支持的并发规则如下：
| | 手动触发 | 定时触发 | Webhook 触发 |
|---|---|---|---|
| 不同服务，同时构建             | √ | √ | x |
| 相同服务，同时构建             | √ | √ | x |
| 不同服务，构建部署到同环境      | √ | √ | √ |
| 不同服务，构建部署到不同环境    | √ | √ | √ |
| 相同服务，构建部署到不同环境    | x | x | √ |
| 相同服务，构建部署到同环境      | x | x | x |