---
title: 插件管理
date: 2025-09-23 14:46:19
permalink: /cn/Zadig v4.0/settings/plugin/
---

Zadig 提供插件管理功能，允许用户根据业务需求自定义和扩展平台功能，增强用户体验。

![插件管理](../../../_images/plugin_0.png)

## 功能概述

插件管理提供了灵活的扩展机制，让用户能够：

- **功能扩展**：通过插件扩展系统功能，满足个性化需求
- **界面定制**：自定义导航菜单和业务页面，提升用户体验
- **集成增强**：集成第三方工具和服务，实现更丰富的功能集成
- **灵活配置**：支持插件的启用和禁用

## 插件类型

插件支持两种主要类型，每种类型有不同的显示位置和用途：

### 导航功能页

导航功能页插件会出现在系统侧边栏菜单中，作为独立的导航项，提供独立的功能页面。

![navigate](../../../_images/plugin_1.png)

### 标签页

标签页插件会在业务目录的标签区域显示，在现有业务页面中添加额外的标签页内容。

![navigate](../../../_images/plugin_2.png)

::: tip
官方插件库：`https://github.com/koderover/zadig-idp-plugins`
欢迎贡献自定义插件
:::

## GitLab MR 插件使用说明

### 插件上传和安装

#### 1. 准备插件文件

确保你有插件的主文件：`plugin.js`

#### 2. 在 Zadig 系统中上传插件

1. 进入 Zadig 系统设置 → 插件管理
2. 点击`新建插件`
3. 填写插件信息：
   - **插件名称**: GitLab MR 查看器
   - **插件类型**: 导航功能页
   - **路由路径**: `/gitlab-mr` 
   - **插件描述**: 查看分配给我的 GitLab Merge Request
   - **插件状态**: 启用
4. 上传 `plugin.js` 文件
5. 点击`创建插件`

#### 3. 访问插件

创建成功后，插件会出现在系统菜单中，点击即可访问：
`http://你的 Zadig 地址/v1/plugin/gitlab-mr`

### 初次使用配置

#### 1. 获取 GitLab Access Token

#### GitLab.com 用户：
1. 访问 `https://gitlab.com/-/profile/personal_access_tokens`
2. 点击"Create personal access token"
3. 填写信息：
   - **Token name**: zadig-plugin
   - **Expiration date**: 设置过期时间（建议1年）
   - **Scopes**: 选择 `api` 和 `read_user`
4. 点击 "Create personal access token"
5. 复制生成的 Token（注意：只显示一次）

#### 私有GitLab实例用户：
1. 访问 `你的 GitLab 地址/-/profile/personal_access_tokens`
2. 按照上述步骤创建 Token

#### 2. 配置插件

1. 打开 GitLab MR 插件页面
2. 点击右上角"配置"按钮
3. 填写配置信息：
   - **GitLab URL**: 
     - GitLab.com 用户填写: `https://gitlab.com`
     - 私有实例用户填写: `https://你的 GitLab 域名`
   - **Access Token**: 粘贴刚才创建的 Token
4. 点击"测试连接"验证配置
5. 测试成功后点击"保存"

### 功能使用

#### 查看 Merge Request 列表

配置完成后，插件会自动显示：
- 分配给你的 MR
- 按更新时间倒序排列
- 显示标题、分支、作者、状态、时间等信息

#### 筛选功能

使用顶部的筛选器：

**按状态筛选：**
- 已打开：正在进行的 MR
- 已关闭：被关闭但未合并的 MR  
- 已合并：已成功合并的 MR
- 全部：所有状态的 MR

**按范围筛选：**
- 分配给我：你被指定为审查者的 MR
- 我创建的：你创建的 MR
- 全部：所有相关的 MR

#### 查看 MR 详情

点击任意 MR 行会在新窗口中打开 GitLab 的 MR 详情页面。

#### 刷新数据

点击右上角"刷新"按钮获取最新的MR数据。

### FAQ

#### Q: 提示"连接失败"怎么办？

A: 检查以下几点：
1. GitLab URL 是否正确
2. Access Token 是否有效
3. Token 权限是否包含 `api` 和 `read_user`
4. 网络是否能访问 GitLab

#### Q: 显示"暂无 Merge Request"

可能的原因：
1. 确实没有分配给你的 MR
2. 筛选条件限制，尝试选择"全部"
3. Token 权限不足，无法读取 MR 数据

#### Q: 如何清除配置？

A: 在配置对话框中点击"清除配置"按钮，这会删除所有保存的 GitLab 信息。

#### Q: 插件安全性如何？

A: 
- 所有配置信息仅保存在浏览器本地存储中
- 不会发送到 Zadig 服务器
- Token 仅用于与 GitLab API 通信

#### Q: 支持哪些GitLab版本？

A: 支持 GitLab v13.0 及以上版本，包括：
- GitLab.com
- GitLab CE/EE 自托管实例

### 技术支持

如果遇到问题，请检查：
1. 浏览器控制台是否有错误信息
2. GitLab API 是否正常工作
3. Token 权限和有效期

需要帮助时，请提供：
- 错误信息截图
- GitLab 版本信息
- 浏览器版本信息


## 使用场景
### 定制化企业 IDP

插件管理功能为构建企业内部开发者平台（Internal Developer Platform, IDP）提供了强大的扩展能力：

- **统一开发体验**：通过插件整合企业内部的各种开发工具和服务，为开发者提供统一的开发环境
- **个性化定制**：根据企业文化和开发流程，定制符合团队习惯的界面和功能
- **工具链集成**：无缝集成代码管理、CI/CD、监控、日志等开发工具，形成完整的开发工具链
- **标准化流程**：通过插件标准化开发流程，提高团队协作效率
- **知识沉淀**：将企业内部的开发经验和最佳实践通过插件形式固化到平台中

## 插件开发

Zadig 提供了 zadig-plugin-cli 工具，帮助开发者快速创建、开发和构建自定义插件。

### 环境准备

开发 Zadig 插件需要以下环境：

- **Node.js**: >= 20.0.0
- **npm**: 随 Node.js 安装
- **现代浏览器**: 支持 ES6+ 语法

### 安装开发工具

#### 全局安装 CLI 工具

```bash
# 全局安装 zadig-plugin-cli
npm install -g zadig-plugin-cli-dev

# 验证安装
zadig-plugin --version
zadig-plugin --help
```

### 快速开始

#### 1. 创建插件项目

根据需求创建不同类型的插件：

```bash
# 创建导航功能页插件
zadig-plugin create my-hello-plugin

# 创建标签页插件  
zadig-plugin create my-tab-plugin --type tab
```

**命令选项：**
- `-t, --type <type>` - 插件类型（page, tab），默认为 page
- `-f, --force` - 强制覆盖已存在的目录

#### 2. 开发调试

```bash
# 进入项目目录
cd my-hello-plugin

# 安装依赖
npm install

# 启动开发服务器
zadig-plugin dev
```

开发服务器启动后，可以在浏览器中实时查看插件效果和调试功能。

#### 3. 构建发布

```bash
# 构建生产版本
zadig-plugin build
```

构建完成后，会在项目目录生成 `plugin.js` 文件，可直接上传到 Zadig 系统使用。

### 插件类型说明

#### Page 插件（导航功能页）

- **特点**: 独立的功能页面，具有完整的路由和页面布局
- **显示位置**: 系统侧边栏菜单
- **用途**: 提供独立的功能模块，如 GitLab MR 查看器、代码质量报告等
- **模板包含**: 路由配置、页面组件、样式文件

#### Tab 插件（标签页）

- **特点**: 嵌入到现有页面的标签页组件，无独立路由
- **显示位置**: 业务目录的标签区域
- **用途**: 扩展现有页面功能，如项目详情页的自定义标签
- **模板包含**: 标签页组件、集成配置

### 开发规范

#### 项目结构

```
my-plugin/
├── src/
│   ├── index.js          # 插件入口文件
│   ├── components/       # 组件目录
│   ├── utils/           # 工具函数
│   └── styles/          # 样式文件
├── package.json         # 项目配置
├── plugin.config.js     # 插件配置
└── README.md           # 说明文档
```

#### 配置文件

`plugin.config.js` 用于配置插件的基本信息：

```javascript
module.exports = {
  name: 'my-plugin',
  displayName: '我的插件',
  type: 'page', // 或 'tab'
  route: '/my-plugin',
  description: '插件描述',
  version: '1.0.0'
};
```

### 常见问题

#### 构建失败

**问题**: 构建过程中出现错误

**解决方案**:
1. 检查 Node.js 版本是否符合要求（>= 20.0.0）
   ```bash
   node --version
   ```
2. 重新安装依赖
   ```bash
   rm -rf node_modules package-lock.json
   npm install
   ```
3. 检查代码语法和导入路径

#### 开发服务器启动失败

**问题**: `zadig-plugin dev` 命令执行失败

**解决方案**:
1. 确认在正确的插件项目目录中
2. 检查 package.json 是否存在
3. 确保已安装项目依赖

#### 插件在 Zadig 中无法加载

**问题**: 上传插件后无法正常显示

**解决方案**:
1. 检查构建产物 `plugin.js` 是否正确生成
2. 验证插件配置信息是否完整
3. 查看浏览器控制台是否有错误信息

### 最佳实践

#### 1. 响应式设计
插件应适配不同屏幕尺寸，确保在各种设备上都能良好展示。

#### 2. 错误处理
做好异常处理，提供友好的错误提示信息。

#### 3. 性能优化
- 合理使用懒加载
- 避免不必要的 API 请求
- 优化资源大小

#### 4. 用户体验
- 提供加载状态指示
- 支持键盘操作
- 遵循 Zadig 设计规范

### 开发资源

- **官方插件库**: `https://github.com/koderover/zadig-idp-plugins`
- **示例插件**: 参考官方库中的示例代码
- **API 文档**: 详见 Zadig 插件开发 API 文档

::: tip 开发支持
- 如需插件开发支持，请联系 Zadig 技术支持团队
- 欢迎向官方插件库贡献优质插件
- 可在 GitHub Issues 中反馈开发过程中遇到的问题
:::
