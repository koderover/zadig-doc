---
title: Cluster
date: 2023-08-03 16:03:41
permalink: /en/Zadig v3.4/api/cluster/
---

## List Cluster Information

**Request**

```
GET /openapi/system/cluster
```

**Successful return instructions**

| Required                                | Description         |
| ----------------------------------- | ------------ |
| [][OpenAPICluster](#OpenAPICluster) | Cluster information list |

<h4 id="!">OpenAPICluster Parameter description</h4>

| Parameter Name          | Description                                                                                                                                                                                  | Required   |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ |
| `cluster_id`    | Cluster ID                                                                                                                                                                               | string |
| `name`          | Cluster name                                                                                                                                                                              | string |
| `description`   | Description                                                                                                                                                                                  | string |
| `provider`      | supplier:<br> `0` : Standard Kubernetes Cluster<br> `1` : Alibaba Cloud ACK<br> `2` : Tencent Cloud TKE<br> `3` : Huawei Cloud CCE<br> `4` : Amazon EKS<br> `5` : Tencent Cloud TKE Serverless<br> `6` : Google Cloud GKE<br> `7` : Microsoft Cloud AKS | int    |
| `provider_name` | Supplier name                                                                                                                                                                            | string |
| `production`    | Is it a production cluster?                                                                                                                                                                        | bool   |
| `created_by`    | Creator                                                                                                                                                                                | string |
| `created_time`  | creation time                                                                                                                                                                              | int    |
| `local`         | Is it a local cluster?                                                                                                                                                                        | bool   |
| `status`        | Cluster Status:<br> `normal` : Normal<br> `disconnected` : Disconnect<br> `pending` : Hang up<br> `abnormal` : Connection exception                                                                          | string |
| `type`          | Cluster type:<br> `agent` : Agent mode<br> `kubeconfig` : Direct connection mode                                                                                                                        | string |

**Return to the example successfully**

```json
[
    {
        "cluster_id": "0123456789****ef12345678",
        "name": "local-20220823144517",
        "production": true,
        "description": "",
        "provider": 0,
        "provider_name": "标准 Kubernetes 集群",
        "created_by": "system",
        "created_time": 1661237117,
        "local": true,
        "status": "normal",
        "type": "agent"
    },
    {
        "cluster_id": "64b80b03f****553e5707fef",
        "name": "tt",
        "production": false,
        "description": "",
        "provider": 4,
        "provider_name": "Amazon EKS",
        "created_by": "admin",
        "created_time": 1689783043,
        "local": false,
        "status": "pending",
        "type": "agent"
    }
]
```

## Create a Cluster

**Request**

```
POST /openapi/system/cluster
```

**body Parameter description**

| Parameter Name          | Description                                                                                                                                                                                  | Required     | Required |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- | ---- |
| `name`          | Cluster name                                                                                                                                                                              | string   | Trigger time, Unix timestamp   |
| `type`          | Cluster type:<br> `agent` : Agent mode<br> `kubeconfig` : Direct connection mode                                                                                                                        | string   | Trigger time, Unix timestamp   |
| `kube_config`   | Kubeconfig Configuration, `type` is empty when `agent` is 0                                                                                                                                              | string   | Trigger time, Unix timestamp   |
| `production`    | Is it a production cluster?                                                                                                                                                                        | bool     | Trigger time, Unix timestamp   |
| `provider`      | supplier:<br> `0` : Standard Kubernetes Cluster<br> `1` : Alibaba Cloud ACK<br> `2` : Tencent Cloud TKE<br> `3` : Huawei Cloud CCE<br> `4` : Amazon EKS<br> `5` : Tencent Cloud TKE Serverless<br> `6` : Google Cloud GKE<br> `7` : Microsoft Cloud AKS | int      | Trigger time, Unix timestamp   |
| `description`   | Cluster Description                                                                                                                                                                              | string   | Trigger time, Unix timestamp   |
| `project_names` | You can use the project scope of this cluster. If you want to set up all projects, you can use `<all_projects>`                                                                                                                    | []string | Trigger time, Unix timestamp   |

**Successful return instructions**

| Parameter Name      | Required                              | Description                                 |
| ----------- | --------------------------------- | ------------------------------------ |
| `cluster`   | [OpenAPICluster](#OpenAPICluster) | Cluster information                             |
| `agent_cmd` | string                            | Agent access command, only valid if type is agent |

**Return to the example successfully**

```json
{
    "cluster": {
        "cluster_id": "0123456789****ef12345678",
        "name": "local-20220823144517",
        "production": true,
        "description": "",
        "provider": 0,
        "provider_name": "标准 Kubernetes 集群",
        "created_by": "system",
        "created_time": 1661237117,
        "local": true,
        "status": "normal",
        "type": "agent"
    },
    "agent_cmd": "kubectl apply -f \"http://course.8slan.com/api/aslan/cluster/agent/6657ee912d51d34e253e503f/agent.yaml?type=deploy\""
}
```

## Update the Specified Cluster

**Request**

```
PUT /openapi/system/cluster/:id
```

**Path parameter description**

| Parameter Name | Required   | Description     | Is it Required | Default Value |
| ------ | ------ | -------- | -------- | ------ |
| `id`   | string | Cluster primary key | Trigger time, Unix timestamp       | None     |

**body Parameter description**

| Parameter Name          | Description                                                               | Required     | Required |
| --------------- | ------------------------------------------------------------------ | -------- | ---- |
| `name`          | Cluster name                                                           | string   | Trigger time, Unix timestamp   |
| `description`   | Cluster Description                                                           | string   | Trigger time, Unix timestamp   |
| `project_names` | You can use the project scope of this cluster. If you want to set up all projects, you can use `<all_projects>` | []string | Trigger time, Unix timestamp   |

**body Parameter example**

``` json
 {
        "name": "local-20220823144517-new",
        "description": "本地集群",
        "project_names": [
            "<all_projects>",
        ]
    }
```

**Successful return instructions**

```JSON
{message: "success"}
```

## Delete the Specified Cluster

**Request**

```
DELETE /openapi/system/cluster/:id
```

**Path parameter description**

| Parameter Name | Required   | Description     | Is it Required | Default Value |
| ------ | ------ | -------- | -------- | ------ |
| `id`   | string | Cluster primary key | Trigger time, Unix timestamp       | None     |

**Successful return instructions**

```JSON
{message: "success"}
```

## Check the Cluster Istio Installation

**Request**

```
GET /openapi/cluster/istio/check/:id
```

**Path parameter description**

| Parameter Name | Required   | Description     | Is it Required | Default Value |
| ------ | ------ | -------- | -------- | ------ |
| `id`   | string | Cluster primary key | Trigger time, Unix timestamp       | None     |

**Successful return instructions**

```
true
```