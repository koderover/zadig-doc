---
title: Version Management
date: 2024-04-23 18:12:00
permalink: /en/Zadig v3.4/api/delivery/
---

## List Versions

**Request**

```
GET /openapi/delivery/releases?projectKey=<projectKey>&pageNum=<pageNum>&pageSize=<pageSize>
```

**Query Parameter description**

| Parameter Name       | Required   | Description     | Required |
| ------------ | ------ | -------- | ---- |
| `projectKey` | string | Project identifier | Trigger time, Unix timestamp   |
| `pageNum`    | int    | Specify the number of pages | Trigger time, Unix timestamp   |
| `pageSize`   | int    | Quantity per page | Trigger time, Unix timestamp   |


**Successful return instructions**

| Parameter Name  | Required                                            | Description     |
| ------- | ----------------------------------------------- | -------- |
| `list`  | [][DeliveryVersionInfo](#delivery-version-info) | Version list |
| `total` | int                                             | Total versions |

<h4 id="!">DeliveryVersionInfo Parameter description</h4>

| Parameter Name         | Required                                                  | Description                                      |
| -------------- | ----------------------------------------------------- | ----------------------------------------- |
| `id`           | string                                                | Version ID                                    |
| `version_name` | string                                                | Version name                                  |
| `type`         | string                                                | Type, K8SYaml or HelmChart                |
| `status`       | string                                                | Status, success, failed, creating, retrying |
| `labels`       | []string                                              | Label                                      |
| `description`  | string                                                | Description                                      |
| `progress`     | [DeliveryVersionProgress](#delivery-version-progress) | Progress, only returns this data in the Get Version Details interface    |
| `created_by`   | string                                                | Created by                                    |
| `created_time` | int64                                                 | creation time                                  |

<h4 id="!">DeliveryVersionProgress Parameter description</h4>

| Parameter Name          | Required   | Description                                          |
| --------------- | ------ | --------------------------------------------- |
| `success_count` | int    | Successful number                                      |
| `total_count`   | int    | total                                          |
| `upload_status` | string | Upload status, success, failed, waiting, uploading |
| `error`         | string | error message                                      |

**Return to the example successfully**

::: details
```json
{
    "list": [
        {
            "id": "66287b110b8b8a631910f5ae",
            "version_name": "v13",
            "type": "K8SYaml",
            "status": "success",
            "labels": [],
            "description": "labore id amet",
            "progress": null,
            "created_by": "patrick",
            "create_time": 1713928977
        },
        {
            "id": "662751047ac26dae6a3a1472",
            "version_name": "v12",
            "type": "K8SYaml",
            "status": "failed",
            "labels": [],
            "description": "labore id amet",
            "progress": null,
            "created_by": "patrick",
            "create_time": 1713852676
        }
    ],
    "total": 12
}
```
:::

## Get Version Details

**Request**

```
GET /openapi/delivery/releases/:id
```

**Path parameter description**

| Parameter Name | Required   | Description   | Required |
| ------ | ------ | ------ | ---- |
| `id`   | string | Version ID | Trigger time, Unix timestamp   |


**Successful return instructions**

| Parameter Name             | Description of types                                              |                                                |
| ------------------ | ----------------------------------------------------- | ---------------------------------------------- |
| `version_info`     | [DeliveryVersionInfo](#delivery-version-info)         | Version Details                                       |
| `deploy_infos`     | [][DeliveryDeployInfo](#delivery-deploy-info)         | K8s Delivery Details, only if type is K8SYaml    |
| `distribute_infos` | [][DeliveryDistributeInfo](#delivery-distribute-info) | Helm Delivery Details, only if type is HelmChart |

<h4 id="!">DeliveryDeployInfo Parameter description</h4>

| Parameter Name           | Required   | Description          |
| ---------------- | ------ | ------------- |
| `id`             | string | K8s Delivery ID |
| `service_name`   | string | Service name      |
| `service_module` | string | Service Component Name  |
| `image`          | string | Full mirror address  |
| `image_name`     | string | The image name      |
| `registry_id`    | string | Mirror Repository ID   |
| `created_time`   | int64  | creation time      |

<h4 id="!">DeliveryDistributeInfo Parameter description</h4>

| Parameter Name            | Required                                                | Description                                                                   |
| ----------------- | --------------------------------------------------- | ---------------------------------------------------------------------- |
| `id`              | string                                              | Helm Delivery ID                                                         |
| `service_name`    | string                                              | Service name                                                               |
| `distribute_type` | string                                              | Delivery type, chart or image                                             |
| `chart_name`      | string                                              | Chart name, only used if distribute_type is chart                       |
| `chart_repo_name` | string                                              | Chart Repository name, only used if distribute_type is chart                   |
| `chart_version`   | string                                              | Chart version, only used if distribute_type is chart                       |
| `service_module`  | string                                              | Service component name, only if distribute_type is image                     |
| `image`           | string                                              | Full mirror address, only if distribute_type is image                     |
| `image_name`      | string                                              | Mirror name, only if distribute_type is image                         |
| `namespace`       | string                                              | Mirror repository namespace only used when distribute_type is image               |
| `created_time`    | int64                                               | creation time                                                               |
| `sub_distributes` | [DeliveryDistributeInfo](#delivery-distribute-info) | The child deliverable is usually only nested with one layer. The parent deliverable is of chart type and the child deliverable is of image type. |

**Return to the example successfully**

K8s YAML Project

::: details
```json
{
    "version_info": {
        "id": "66287b110b8b8a631910f5ae",
        "version_name": "v13",
        "type": "K8SYaml",
        "status": "success",
        "labels": [
            "cupidatat ullamco anim eiusmod"
        ],
        "description": "labore id amet",
        "progress": {
            "success_count": 2,
            "total_count": 2,
            "upload_status": "success",
            "error": ""
        },
        "created_by": "patrick",
        "create_time": 1713928977
    },
    "deploy_infos": [
        {
            "id": "66287b110b8b8a631910f5af",
            "service_name": "service1",
            "service_module": "service1",
            "image": "koderover.tencentcloudcr.com/test/service1:20240419133934-5-main",
            "image_name": "service1",
            "registry_id": "62ce6231e0281143de477e60",
            "create_time": 1713928977
        },
        {
            "id": "66287b110b8b8a631910f5b0",
            "service_name": "service2",
            "service_module": "service2",
            "image": "koderover.tencentcloudcr.com/test/service2:20240419133934-5-main",
            "image_name": "service2",
            "registry_id": "62ce6231e0281143de477e60",
            "create_time": 1713928977
        }
    ],
    "distribute_infos": []
}
```
:::

Helm Chart Project

::: details
```json
{
    "version_info": {
        "id": "66287c000b8b8a631910f5b8",
        "version_name": "v4",
        "type": "HelmChart",
        "status": "success",
        "labels": [
            "cupidatat ullamco anim eiusmod"
        ],
        "description": "labore id amet",
        "progress": {
            "success_count": 2,
            "total_count": 2,
            "upload_status": "success",
            "error": ""
        },
        "created_by": "patrick",
        "create_time": 1713929216
    },
    "deploy_infos": [],
    "distribute_infos": [
        {
            "id": "66287c080b8b8a631910f5bd",
            "service_name": "service2",
            "distribute_type": "chart",
            "chart_name": "service2",
            "chart_repo_name": "test",
            "chart_version": "1.76",
            "service_module": "",
            "image": "",
            "image_name": "",
            "namespace": "",
            "create_time": 1713929224,
            "sub_distributes": [
                {
                    "id": "66287c080b8b8a631910f5bc",
                    "service_name": "service2",
                    "distribute_type": "image",
                    "chart_name": "",
                    "chart_repo_name": "",
                    "chart_version": "",
                    "service_module": "service2",
                    "image": "koderover.tencentcloudcr.com/test/service2:20240419133934-5-main",
                    "image_name": "service2",
                    "namespace": "test",
                    "create_time": 1713929224,
                    "sub_distributes": []
                }
            ]
        },
        {
            "id": "66287c0f0b8b8a631910f5c0",
            "service_name": "service1",
            "distribute_type": "chart",
            "chart_name": "service1",
            "chart_repo_name": "test",
            "chart_version": "1.76",
            "service_module": "",
            "image": "",
            "image_name": "",
            "namespace": "",
            "create_time": 1713929231,
            "sub_distributes": [
                {
                    "id": "66287c0f0b8b8a631910f5bf",
                    "service_name": "service1",
                    "distribute_type": "image",
                    "chart_name": "",
                    "chart_repo_name": "",
                    "chart_version": "",
                    "service_module": "service1",
                    "image": "koderover.tencentcloudcr.com/test/service1:20240419133934-5-main",
                    "image_name": "service1",
                    "namespace": "test",
                    "create_time": 1713929231,
                    "sub_distributes": []
                }
            ]
        }
    ]
}
```
:::

## Delete the Version

**Request**

```
DELETE /openapi/delivery/releases/:id?projectKey=<projectKey>
```

**Path parameter description**

| Parameter Name | Required   | Description   | Required |
| ------ | ------ | ------ | ---- |
| `id`   | string | Version ID | Trigger time, Unix timestamp   |

**Query Parameter description**

| Parameter Name       | Required   | Description     | Required |
| ------------ | ------ | -------- | ---- |
| `projectKey` | string | Project identifier | Trigger time, Unix timestamp   |

**Return to the example successfully**

```json
{
  "message": "success"
}
```

## K8s YAML Project Creation Version

**Request**

```
POST /openapi/delivery/releases/k8s
```

**body Parameter description**

| Parameter Name              | Required                                                     | Description              |
| ------------------- | -------------------------------------------------------- | ----------------- |
| `project_key`       | string                                                   | Project identifier          |
| `version_name`      | string                                                   | Version name          |
| `retry`             | bool                                                     | Is it a retry        |
| `env_name`          | string                                                   | Environment name          |
| `production`        | bool                                                     | Is it a production environment    |
| `desc`              | string                                                   | Description              |
| `labels`            | []string                                                 | Label              |
| `image_registry_id` | string                                                   | Mirror Repository ID       |
| `yaml_datas`        | [][DeliveryVersionYamlData](#delivery-version-yaml-data) | Yaml service data list |

<h4 id="!">DeliveryVersionYamlData Parameter description</h4>

| Parameter Name         | Required                                                       | Description               |
| -------------- | ---------------------------------------------------------- | ------------------ |
| `service_name` | string                                                     | Service name           |
| `image_datas`  | [][DeliveryVersionImageData](#delivery-version-image-data) | ReTag mirror data list |

<h4 id="!">DeliveryVersionImageData Parameter description</h4>

| Parameter Name               | Required   | Description             |
| -------------------- | ------ | ---------------- |
| `container_name`     | string | Container name         |
| `image_name`         | string | The image name         |
| `image_tag`          | string | Mirror tag         |
| `disable_image_dist` | bool   | Whether to disable mirror distribution |

**Return to the example successfully**

```json
{
  "message": "success"
}
```

## Helm Chart Project Creation Version

**Request**

```
POST /openapi/delivery/releases/helm
```

**body Parameter description**

| Parameter Name              | Required                                                       | Description               |
| ------------------- | ---------------------------------------------------------- | ------------------ |
| `project_key`       | string                                                     | Project identifier           |
| `version_name`      | string                                                     | Version name           |
| `retry`             | bool                                                       | Is it a retry         |
| `env_name`          | string                                                     | Environment name           |
| `production`        | bool                                                       | Is it a production environment     |
| `desc`              | string                                                     | Description               |
| `labels`            | []string                                                   | Label               |
| `image_registry_id` | string                                                     | Mirror Repository ID        |
| `chart_repo_name`   | string                                                     | Chart warehouse name     |
| `chart_datas`       | [][DeliveryVersionChartData](#delivery-version-chart-data) | Chart Service Data List |

<h4 id="!">DeliveryVersionChartData Parameter description</h4>

| Parameter Name         | Required                                                       | Description               |
| -------------- | ---------------------------------------------------------- | ------------------ |
| `service_name` | string                                                     | Service name           |
| `version`      | string                                                     | Chart Version Number       |
| `image_datas`  | [][DeliveryVersionImageData](#delivery-version-image-data) | ReTag mirror data list |

**Return to the example successfully**

```json
{
  "message": "success"
}
```