---
title: Version Management
date: 2024-04-23 18:12:00
permalink: /en/Zadig v3.4/api/delivery/
---

## List Versions

**Request**

```
GET /openapi/delivery/releases?projectKey=<projectKey>&pageNum=<pageNum>&pageSize=<pageSize>
```

**Query Parameter Description**

| Parameter Name | Type   | Description | Required |
| -------------- | ------ | ----------- | -------- |
| `projectKey`   | string | Project Key | Yes      |
| `pageNum`      | int    | Page number | Yes      |
| `pageSize`     | int    | Page size   | Yes      |

**Success Response Description**

| Parameter Name | Type                                            | Description  |
| -------------- | ----------------------------------------------- | ------------ |
| `list`         | [][DeliveryVersionInfo](#delivery-version-info) | Version list |
| `total`        | int                                             | Total count  |

<h4 id="delivery-version-info">DeliveryVersionInfo Parameter Description</h4>

| Parameter Name | Type     | Description                                 |
| -------------- | -------- | ------------------------------------------- |
| `id`           | string   | Version ID                                  |
| `version_name` | string   | Version name                                |
| `source`       | string   | Source: manual, from_env, from_version      |
| `type`         | string   | Type: K8SYaml or HelmChart                  |
| `status`       | string   | Status: success, failed, creating, retrying |
| `labels`       | []string | Labels                                      |
| `description`  | string   | Description                                 |
| `created_by`   | string   | Creator                                     |
| `created_time` | int64    | Creation time                               |

**Success Response Example**

::: details
```json
{
    "list": [
        {
            "id": "66287b110b8b8a631910f5ae",
            "version_name": "v13",
            "type": "K8SYaml",
            "source": "manual",
            "status": "success",
            "labels": [],
            "description": "labore id amet",
            "progress": null,
            "created_by": "patrick",
            "create_time": 1713928977
        },
        {
            "id": "662751047ac26dae6a3a1472",
            "version_name": "v12",
            "type": "K8SYaml",
            "source": "from_env",
            "status": "failed",
            "labels": [],
            "description": "labore id amet",
            "progress": null,
            "created_by": "patrick",
            "create_time": 1713852676
        }
    ],
    "total": 12
}
```
:::

## Get Version Details

**Request**

```
GET /openapi/delivery/releases/:id
```

**Path Parameter Description**

| Parameter Name | Type   | Description | Required |
| -------------- | ------ | ----------- | -------- |
| `id`           | string | Version ID  | Yes      |

**Success Response Description**

| Parameter Name      | Type                                                  | Description                                                              |
| ------------------- | ----------------------------------------------------- | ------------------------------------------------------------------------ |
| `id`                | string                                                | Version ID                                                               |
| `version_name`      | string                                                | Version name                                                             |
| `project_key`       | string                                                | Project key                                                              |
| `source`            | string                                                | Source: manual, from_env, from_version                                   |
| `env_name`          | string                                                | Environment name, valid when source is from_env or from_version          |
| `production`        | bool                                                  | Is production environment, valid when source is from_env or from_version |
| `type`              | string                                                | Type: K8SYaml or HelmChart                                               |
| `status`            | string                                                | Status: success, failed, creating, retrying                              |
| `error`             | string                                                | Error message                                                            |
| `labels`            | []string                                              | Labels                                                                   |
| `description`       | string                                                | Description                                                              |
| `image_registry_id` | string                                                | Image registry ID                                                        |
| `chart_repo_name`   | string                                                | Chart repository name, valid when type is HelmChart                      |
| `services`          | [][DeliveryVersionService](#delivery-version-service) | Service list                                                             |
| `created_by`        | string                                                | Creator                                                                  |
| `created_time`      | int64                                                 | Creation time                                                            |

<h4 id="delivery-version-service">DeliveryVersionService Parameter Description</h4>

| Parameter Name  | Type                                            | Description        |
| --------------- | ----------------------------------------------- | ------------------ |
| `service_name`  | string                                          | K8s delivery ID    |
| `chart_name`    | string                                          | Chart name         |
| `chart_version` | string                                          | Chart version      |
| `chart_status`  | string                                          | Chart push status  |
| `yaml_content`  | string                                          | Yaml content       |
| `images`        | [DeliveryVersionImage](#delivery-version-image) | Image list         |
| `error`         | string                                          | Push error message |

<h4 id="delivery-version-image">DeliveryVersionImage Parameter Description</h4>

| Parameter Name     | Type   | Description           |
| ------------------ | ------ | --------------------- |
| `container_name`   | string | Container name        |
| `image_name`       | string | Image name            |
| `source_image`     | string | Source image address  |
| `source_image_tag` | string | Source image tag      |
| `target_image`     | string | Target image address  |
| `target_image_tag` | string | Target image tag      |
| `push_image`       | bool   | Whether to push image |
| `status`           | string | Push status           |
| `error`            | string | Push error message    |

**Success Response Example**

K8s YAML Project

::: details
```json
{
    "version_info": {
        "id": "66287b110b8b8a631910f5ae",
        "version_name": "v13",
        "type": "K8SYaml",
        "status": "success",
        "labels": [
            "cupidatat ullamco anim eiusmod"
        ],
        "description": "labore id amet",
        "progress": {
            "success_count": 2,
            "total_count": 2,
            "upload_status": "success",
            "error": ""
        },
        "created_by": "patrick",
        "create_time": 1713928977
    },
    "deploy_infos": [
        {
            "id": "66287b110b8b8a631910f5af",
            "service_name": "service1",
            "service_module": "service1",
            "image": "koderover.tencentcloudcr.com/test/service1:20240419133934-5-main",
            "image_name": "service1",
            "registry_id": "62ce6231e0281143de477e60",
            "create_time": 1713928977
        },
        {
            "id": "66287b110b8b8a631910f5b0",
            "service_name": "service2",
            "service_module": "service2",
            "image": "koderover.tencentcloudcr.com/test/service2:20240419133934-5-main",
            "image_name": "service2",
            "registry_id": "62ce6231e0281143de477e60",
            "create_time": 1713928977
        }
    ],
    "distribute_infos": []
}
```
:::

Helm Chart Project

::: details
```json
{
    "version_info": {
        "id": "66287c000b8b8a631910f5b8",
        "version_name": "v4",
        "type": "HelmChart",
        "status": "success",
        "labels": [
            "cupidatat ullamco anim eiusmod"
        ],
        "description": "labore id amet",
        "progress": {
            "success_count": 2,
            "total_count": 2,
            "upload_status": "success",
            "error": ""
        },
        "created_by": "patrick",
        "create_time": 1713929216
    },
    "deploy_infos": [],
    "distribute_infos": [
        {
            "id": "66287c080b8b8a631910f5bd",
            "service_name": "service2",
            "distribute_type": "chart",
            "chart_name": "service2",
            "chart_repo_name": "test",
            "chart_version": "1.76",
            "service_module": "",
            "image": "",
            "image_name": "",
            "namespace": "",
            "create_time": 1713929224,
            "sub_distributes": [
                {
                    "id": "66287c080b8b8a631910f5bc",
                    "service_name": "service2",
                    "distribute_type": "image",
                    "chart_name": "",
                    "chart_repo_name": "",
                    "chart_version": "",
                    "service_module": "service2",
                    "image": "koderover.tencentcloudcr.com/test/service2:20240419133934-5-main",
                    "image_name": "service2",
                    "namespace": "test",
                    "create_time": 1713929224,
                    "sub_distributes": []
                }
            ]
        },
        {
            "id": "66287c0f0b8b8a631910f5c0",
            "service_name": "service1",
            "distribute_type": "chart",
            "chart_name": "service1",
            "chart_repo_name": "test",
            "chart_version": "1.76",
            "service_module": "",
            "image": "",
            "image_name": "",
            "namespace": "",
            "create_time": 1713929231,
            "sub_distributes": [
                {
                    "id": "66287c0f0b8b8a631910f5bf",
                    "service_name": "service1",
                    "distribute_type": "image",
                    "chart_name": "",
                    "chart_repo_name": "",
                    "chart_version": "",
                    "service_module": "service1",
                    "image": "koderover.tencentcloudcr.com/test/service1:20240419133934-5-main",
                    "image_name": "service1",
                    "namespace": "test",
                    "create_time": 1713929231,
                    "sub_distributes": []
                }
            ]
        }
    ]
}
```
:::

## Delete Version

**Request**

```
DELETE /openapi/delivery/releases/:id?projectKey=<projectKey>
```

**Path Parameter Description**

| Parameter Name | Type   | Description | Required |
| -------------- | ------ | ----------- | -------- |
| `id`           | string | Version ID  | Yes      |

**Query Parameter Description**

| Parameter Name | Type   | Description | Required |
| -------------- | ------ | ----------- | -------- |
| `projectKey`   | string | Project Key | Yes      |

**Success Response Example**

```json
{
  "message": "success"
}
```

## Create Version for K8s YAML Project

**Request**

```
POST /openapi/delivery/releases/k8s
```

**Body Parameter Description**

| Parameter Name      | Type                                                               | Description                                                              |
| ------------------- | ------------------------------------------------------------------ | ------------------------------------------------------------------------ |
| `project_key`       | string                                                             | Project key                                                              |
| `version_name`      | string                                                             | Version name                                                             |
| `source`            | string                                                             | Source: manual, from_env, from_version                                   |
| `env_name`          | string                                                             | Environment name, valid when source is from_env or from_version          |
| `production`        | bool                                                               | Is production environment, valid when source is from_env or from_version |
| `desc`              | string                                                             | Description                                                              |
| `labels`            | []string                                                           | Labels                                                                   |
| `image_registry_id` | string                                                             | Image registry ID                                                        |
| `services`          | [][DeliveryVersionCreateService](#create-delivery-version-service) | Service list                                                             |

<h4 id="create-delivery-version-service">DeliveryVersionCreateService Parameter Description</h4>

| Parameter Name           | Type                                                   | Description                                                                      |
| ------------------------ | ------------------------------------------------------ | -------------------------------------------------------------------------------- |
| `service_name`           | string                                                 | Service name                                                                     |
| `original_chart_version` | string                                                 | Source Chart version, required when type is HelmChart and Source is from_version |
| `chart_version`          | string                                                 | Chart version, valid when type is HelmChart                                      |
| `yaml_content`           | string                                                 | Yaml content                                                                     |
| `images`                 | [DeliveryVersionImage](#create-delivery-version-image) | Image list                                                                       |

<h4 id="create-delivery-version-image">DeliveryVersionImage Parameter Description</h4>

| Parameter Name     | Type                     | Description                                                                                                                                               |
| ------------------ | ------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `container_name`   | string                   | Container name                                                                                                                                            |
| `image_name`       | string                   | Image name                                                                                                                                                |
| `source_image`     | string                   | Source image address                                                                                                                                      |
| `source_image_tag` | string                   | Source image tag                                                                                                                                          |
| `target_image`     | string                   | Target image address                                                                                                                                      |
| `target_image_tag` | string                   | Target image tag                                                                                                                                          |
| `image_path`       | [ImagePath](#image-path) | Image path, required when type is HelmChart, this field can be obtained from [View Environment Details API](/en/Zadig%20v3.4/api/env/#test-environment-2) |
| `push_image`       | bool                     | Whether to push image                                                                                                                                     |

<h4 id="image-path">ImagePath Parameter Description</h4>

| Parameter Name | Type   | Description                |
| -------------- | ------ | -------------------------- |
| `repo`         | string | Image repository name      |
| `namespace`    | string | Image repository namespace |
| `image`        | string | Image name                 |
| `tag`          | string | Image tag                  |

**Success Response Example**

```json
{
  "message": "success"
}
```

## Create Version for Helm Chart Project

**Request**

```
POST /openapi/delivery/releases/helm
```

**Body Parameter Description**

| Parameter Name             | Type                                                               | Description                                                              |
| -------------------------- | ------------------------------------------------------------------ | ------------------------------------------------------------------------ |
| `project_key`              | string                                                             | Project key                                                              |
| `version_name`             | string                                                             | Version name                                                             |
| `source`                   | string                                                             | Source: manual, from_env, from_version                                   |
| `env_name`                 | string                                                             | Environment name, valid when source is from_env          |
| `production`               | bool                                                               | Is production environment, valid when source is from_env |
| `desc`                     | string                                                             | Description                                                              |
| `labels`                   | []string                                                           | Labels                                                                   |
| `image_registry_id`        | string                                                             | Image registry ID                                                        |
| `original_chart_repo_name` | string                                                             | Source Chart repository name, required when source is from_version       |
| `chart_repo_name`          | string                                                             | Chart repository name                                                    |
| `services`                 | [][DeliveryVersionCreateService](#create-delivery-version-service-2) | Service list                                                             |

<h4 id="create-delivery-version-service-2">DeliveryVersionCreateService Parameter Description</h4>

| Parameter Name           | Type                                                   | Description                                                                      |
| ------------------------ | ------------------------------------------------------ | -------------------------------------------------------------------------------- |
| `service_name`           | string                                                 | Service name                                                                     |
| `original_chart_version` | string                                                 | Source Chart version, required when type is HelmChart and Source is from_version |
| `chart_version`          | string                                                 | Chart version, valid when type is HelmChart                                      |
| `yaml_content`           | string                                                 | Yaml content                                                                     |
| `images`                 | [DeliveryVersionImage](#create-delivery-version-image-2) | Image list                                                                       |

<h4 id="create-delivery-version-image-2">DeliveryVersionImage Parameter Description</h4>

| Parameter Name     | Type                     | Description                                                                                                                                               |
| ------------------ | ------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `container_name`   | string                   | Container name                                                                                                                                            |
| `image_name`       | string                   | Image name                                                                                                                                                |
| `source_image`     | string                   | Source image address                                                                                                                                      |
| `source_image_tag` | string                   | Source image tag                                                                                                                                          |
| `target_image`     | string                   | Target image address                                                                                                                                      |
| `target_image_tag` | string                   | Target image tag                                                                                                                                          |
| `image_path`       | [ImagePath](#image-path-2) | Image path, required when type is HelmChart, this field can be obtained from [View Environment Details API](/en/Zadig%20v3.4/api/env/#test-environment-2) |
| `push_image`       | bool                     | Whether to push image                                                                                                                                     |

<h4 id="image-path-2">ImagePath Parameter Description</h4>

| Parameter Name | Type   | Description                |
| -------------- | ------ | -------------------------- |
| `repo`         | string | Image repository name      |
| `namespace`    | string | Image repository namespace |
| `image`        | string | Image name                 |
| `tag`          | string | Image tag                  |

**Success Response Example**

```json
{
  "message": "success"
}
```

## Retry Create Version

**Request**

```
POST /openapi/delivery/releases/retry
```

**Body Parameter Description**

| Parameter Name | Type   | Description |
| -------------- | ------ | ----------- |
| `id`           | string | Version ID  |
| `projectKey`   | string | Project key |

**Success Response Example**

```json
{
  "message": "success"
}
```