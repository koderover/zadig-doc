---
title: Permissions
date: 2024-02-09 15:56:00
permalink: /en/Zadig v3.4/api/policy/
---


## List Project Permission Item Definitions

**Request**

```
GET /openapi/policy/resource-actions?projectName=<project identifier>&envType=<project type>
```

**Query Parameter description**

| Parameter Name       | Required   | Description     | Required |
| ------------ | ------ | -------- | ---- |
| `projectName` | string | Project identifier | Yes   |
| `envType` | string | Project type, free project is `pm` , other types are `k8s` | Yes   |


**Successful return instructions**

| Parameter Name     | Required                    | Description     |
| ---------- | ----------------------- | -------- |
| `resource` | string |  Operation object |
| `alias`    | string                     | Operation object alias |
| `rules`    | [][Rules](#rule)                     | Operation Items |

<h4 id="!">Operation item parameter description</h4>

| Parameter Name       | Required   | Description               |
| ------------ | ------ | ------------------ |
| `action`       | string | Operation item definition       |
| `alias`      | string | Operation item alias |

**Return to the example successfully**

```json

[
    {
        "resource": "Workflow",
        "alias": "工作流",
        "rules": [
            {
                "action": "get_workflow",
                "alias": "查看"
            },
            {
                "action": "create_workflow",
                "alias": "新建"
            },
            {
                "action": "edit_workflow",
                "alias": "编辑"
            },
            {
                "action": "delete_workflow",
                "alias": "删除"
            },
            {
                "action": "run_workflow",
                "alias": "执行"
            },
            {
                "action": "debug_workflow",
                "alias": "调试"
            }
        ]
    },
    {
        "resource": "Environment",
        "alias": "测试环境",
        "rules": [
            {
                "action": "get_environment",
                "alias": "查看"
            },
            {
                "action": "create_environment",
                "alias": "创建"
            },
            {
                "action": "config_environment",
                "alias": "配置"
            },
            {
                "action": "manage_environment",
                "alias": "管理服务实例"
            },
            {
                "action": "delete_environment",
                "alias": "删除"
            },
            {
                "action": "debug_pod",
                "alias": "服务调试"
            }
        ]
    },
    {
        "resource": "ProductionEnvironment",
        "alias": "生产环境",
        "rules": [
            {
                "action": "get_production_environment",
                "alias": "查看"
            },
            {
                "action": "create_production_environment",
                "alias": "创建"
            },
            {
                "action": "config_production_environment",
                "alias": "配置"
            },
            {
                "action": "edit_production_environment",
                "alias": "管理服务实例"
            },
            {
                "action": "delete_production_environment",
                "alias": "删除"
            },
            {
                "action": "production_debug_pod",
                "alias": "服务调试"
            }
        ]
    },
    {
        "resource": "Service",
        "alias": "测试服务",
        "rules": [
            {
                "action": "get_service",
                "alias": "查看"
            },
            {
                "action": "create_service",
                "alias": "新建"
            },
            {
                "action": "edit_service",
                "alias": "编辑"
            },
            {
                "action": "delete_service",
                "alias": "删除"
            }
        ]
    },
    {
        "resource": "ProductionService",
        "alias": "生产服务",
        "rules": [
            {
                "action": "get_production_service",
                "alias": "查看"
            },
            {
                "action": "create_production_service",
                "alias": "新建"
            },
            {
                "action": "edit_production_service",
                "alias": "编辑"
            },
            {
                "action": "delete_production_service",
                "alias": "删除"
            }
        ]
    },
    {
        "resource": "Build",
        "alias": "构建",
        "rules": [
            {
                "action": "get_build",
                "alias": "查看"
            },
            {
                "action": "create_build",
                "alias": "新建"
            },
            {
                "action": "edit_build",
                "alias": "编辑"
            },
            {
                "action": "delete_build",
                "alias": "删除"
            }
        ]
    },
    {
        "resource": "Test",
        "alias": "测试",
        "rules": [
            {
                "action": "get_test",
                "alias": "查看"
            },
            {
                "action": "create_test",
                "alias": "新建"
            },
            {
                "action": "edit_test",
                "alias": "编辑"
            },
            {
                "action": "delete_test",
                "alias": "删除"
            },
            {
                "action": "run_test",
                "alias": "执行"
            }
        ]
    },
    {
        "resource": "Scan",
        "alias": "代码扫描",
        "rules": [
            {
                "action": "get_scan",
                "alias": "查看"
            },
            {
                "action": "create_scan",
                "alias": "新建"
            },
            {
                "action": "edit_scan",
                "alias": "编辑"
            },
            {
                "action": "delete_scan",
                "alias": "删除"
            },
            {
                "action": "run_scan",
                "alias": "执行"
            }
        ]
    },
    {
        "resource": "Delivery",
        "alias": "版本管理",
        "rules": [
            {
                "action": "get_delivery",
                "alias": "查看"
            },
            {
                "action": "create_delivery",
                "alias": "创建"
            },
            {
                "action": "delete_delivery",
                "alias": "删除"
            }
        ]
    }
]

```


## List Project Role Information

**Request**

```
GET /openapi/policy/roles?namespace=<project identifier>
```

**Query Parameter description**

| Parameter Name       | Required   | Description     | Required |
| ------------ | ------ | -------- | ---- |
| `namespace` | string | Project identifier | Yes   |

**Successful return instructions**

| Parameter Name     | Required                    | Description     |
| ---------- | ----------------------- | -------- |
| `id` | int |  id |
| `name`    | string                     | Name |
| `namespace`    | string                     | Unique project identification |
| `desc`    | string                     | Description |
| `type`    | string                     | Type, when the value is `custom` , it is marked as a self-built type |

**Return to the example successfully**

```json
[
    {
        "id": 51,
        "name": "dev",
        "namespace": "test-k8skv-2",
        "desc": "",
        "type": "custom"
    },
    {
        "id": 1,
        "name": "project-admin",
        "namespace": "test-k8skv-2",
        "desc": "",
        "type": "system"
    },
    {
        "id": 2,
        "name": "read-only",
        "namespace": "test-k8skv-2",
        "desc": "",
        "type": "system"
    },
    {
        "id": 3,
        "name": "read-project-only",
        "namespace": "test-k8skv-2",
        "desc": "",
        "type": "system"
    }
]
```

## Get Project Role Details

**Request**

```
GET /openapi/policy/roles/:name?namespace=<project identifier>
```

**Path parameter description**

| Parameter Name        | Required   | Description     | Required |
| ------------- | ------ | -------- | ---- |
| `name` | string | Role name | Yes   |

**Query Parameter description**

| Parameter Name       | Required   | Description     | Required |
| ------------ | ------ | -------- | ---- |
| `namespace` | string | Project identifier | Yes   |


**Successful return instructions**

| Parameter Name     | Required                    | Description     |
| ---------- | ----------------------- | -------- |
| `id` | int |  id |
| `name`    | string                     | Name |
| `namespace`    | string                     | Unique project identification |
| `rules`    | [][Rule](#Rule-1)                     | Permission list |
| `desc`    | string                     | Description |
| `type`    | string                     | Type, when the value is `custom` , it is marked as a self-built type |

<h4 id="!">Rule Parameter description</h4>

| Parameter Name       | Required   | Description               |
| ------------ | ------ | ------------------ |
| `resource`       | string | Operation object       |
| `verbs`      | []string | Permission item, refer to the permission definition interface for specific values |

**Return to the example successfully**

```json
{
    "id": 51,
    "name": "dev",
    "namespace": "test-k8skv-2",
    "desc": "",
    "type": "custom",
    "rules": [
        {
            "resource": "Test",
            "verbs": [
                "get_test"
            ]
        },
        {
            "resource": "Scan",
            "verbs": [
                "get_scan"
            ]
        },
        {
            "resource": "Delivery",
            "verbs": [
                "get_delivery"
            ]
        },
        {
            "resource": "Workflow",
            "verbs": [
                "get_workflow",
                "run_workflow"
            ]
        },
        {
            "resource": "ProductionEnvironment",
            "verbs": [
                "get_production_environment"
            ]
        },
        {
            "resource": "Service",
            "verbs": [
                "get_service"
            ]
        },
        {
            "resource": "ProductionService",
            "verbs": [
                "get_production_service"
            ]
        },
        {
            "resource": "Build",
            "verbs": [
                "get_build"
            ]
        },
        {
            "resource": "Environment",
            "verbs": [
                "get_environment"
            ]
        }
    ]
}
```

## Create a Project Role

**Request**

```
POST /openapi/policy/roles?namespace=<project identifier>
```

**Query Parameter description**

| Parameter Name       | Required   | Description     | Required |
| ------------ | ------ | -------- | ---- |
| `namespace` | string | Project identifier | Yes   |

**Body Parameter description**

|Parameter Name|Description|Required|Required|
|----------------|-------------------|---|---|
|`name`  |Role name|string|Yes|
|`namespace` |Project identifier| string|Yes|
|`actions`   | Permissions | []string|Yes|

**Body Parameter example**

``` json
{
    "name": "test",
    "actions":
    [
        "get_test",
        "create_test",
        "edit_test"
    ],
    "namespace": "test-k8skv-2"
}
```

**Return to the example successfully**

```json
{
  "message": "success"
}
```


## Edit Project Roles

**Request**

```
PUT /openapi/policy/roles/:name?namespace=<project identifier>
```

**Path parameter description**

| Parameter Name        | Required   | Description     | Required |
| ------------- | ------ | -------- | ---- |
| `name` | string | Role name | Yes   |

**Query Parameter description**

| Parameter Name       | Required   | Description     | Required |
| ------------ | ------ | -------- | ---- |
| `namespace` | string | Project identifier | Yes   |

**Body Parameter description**

|Parameter Name|Description|Required|Required|
|----------------|-------------------|---|---|
|`actions`   | Permissions | []string|Yes|

**Body Parameter example**

``` json
{
    "actions":
    [
        "create_test",
        "edit_test",
        "get_test",
        "get_build"
    ]
}
```

**Return to the example successfully**

```json
{
  "message": "success"
}
```

## Delete Project Roles

**Request**

```
DELETE /openapi/policy/roles/:name?namespace=<project identifier>
```

**Path parameter description**

| Parameter Name        | Required   | Description     | Required |
| ------------- | ------ | -------- | ---- |
| `name` | string | Role name | Yes   |

**Query Parameter description**

| Parameter Name       | Required   | Description     | Required |
| ------------ | ------ | -------- | ---- |
| `namespace` | string | Project identifier | Yes   |

**Body Parameter description**

|Parameter Name|Description|Required|Required|
|----------------|-------------------|---|---|
|`actions`   | Permissions | []string|Yes|

**Body Parameter example**

``` json
{
    "actions":
    [
        "create_test",
        "edit_test",
        "get_test",
        "get_build"
    ]
}
```

**Return to the example successfully**

```json
{
  "message": "success"
}
```

## List Project Members

**Request**

```
GET /openapi/policy/role-bindings?namespace=<project identifier>
```

**Query Parameter description**

| Parameter Name       | Required   | Description     | Required |
| ------------ | ------ | -------- | ---- |
| `namespace` | string | Project identifier | Yes   |

**Successful return instructions**

| Parameter Name     | Required                    | Description     |
| ---------- | ----------------------- | -------- |
| `binding_type` | string |  Member type, `user` is user, `group` is user group  |
| `user_info`    | UserInfo(#userinfo-1) | User member information, effective when the value `binding_type` is `user` |
| `group_info`    | UserInfo(#groupinfo-1) | User group member information, effective when the value `binding_type` is `group` |
| `roles`    | []string                     | Roles owned |

<h4 id="!">User member parameter description</h4>

| Parameter Name          | Description                                                         | Required   |
| --------------- | ------------------------------------------------------------ | ------ |
| `uid`      |   uid                                                   | string |
| `name`     | username                                                     | string |
| `accout`   | Account name                           | string |

<h4 id="!">User group member parameter description</h4>

| Parameter Name          | Description                                                         | Required   |
| --------------- | ------------------------------------------------------------ | ------ |
| `group_id`      |   group_id                                                   | string |
| `name`     | User group name                                                     | string |


**Return to the example successfully**

```json
[
    {
        "binding_type": "user",
        "user_info": {
            "identity_type": "system",
            "uid": "d456d705-73a9-11ee-98cf-56ef622fc735",
            "account": "demo",
            "username": "demo"
        },
        "roles": [
            "prod-test",
            "read-project-only"
        ]
    },
    {
        "binding_type": "user",
        "user_info": {
            "identity_type": "system",
            "uid": "290a3f01-73aa-11ee-98cf-56ef622fc735",
            "account": "leo",
            "username": "leo"
        },
        "roles": [
            "read-project-only"
        ]
    },
    {
        "binding_type": "group",
        "group_info": {
            "group_id": "98256be6-6e53-11ee-a205-9653dd3e9c32",
            "name": "XX"
        },
        "roles": [
            "read-project-only"
        ]
    },
    {
        "binding_type": "group",
        "group_info": {
            "group_id": "cce58580-5131-11ee-b458-4a4088364d94",
            "name": "所有用户"
        },
        "roles": [
            "read-project-only"
        ]
    }
]
```

## Add Project Members

**Request**

```
POST /openapi/policy/role-bindings?namespace=<project identifier>
```

**Query Parameter description**

| Parameter Name       | Required   | Description     | Required |
| ------------ | ------ | -------- | ---- |
| `namespace` | string | Project identifier | Yes   |

**Body Parameter description**

|Parameter Name|Description|Required|Required|
|----------------|-------------------|---|---|
|`role`   | Role Type | string|Yes|
|`identities`   | Member data list | [][identities](#identities-1) |Yes|

**Body Parameter example**

<h4 id="!">Member data parameter description</h4>

| Parameter Name          | Description                                        | Required                       | Required                          |
| --------------- | ------------------------------------------- | -------------------------- | ----------------------------- |
| `identity_type`  | Member Type                                   | string `user` or `group`                     | Yes                            |
| `gid`  | User group id                                   | string                     | Required when adding user groups                          |
| `uid`  | User ID                                   | string              | Required when adding users                            |

``` json
{
    "role": "read-project-only",
    "identities":
    [
        {
            "identity_type": "group",
            "gid": "98256be6-6e53-11ee-a205-9653dd3e9c32"
        },
        {
            "identity_type": "group",
            "gid": "cce58580-5131-11ee-b458-4a4088364d94"
        },
        {
            "identity_type": "user",
            "uid": "ddd405d5-5131-11ee-b458-4a4088364d94"
        }
    ]
}
```

**Return to the example successfully**

```json
{
  "message": "success"
}
```


## Update Project Member Roles

**Request**

```
POST /openapi/policy/role-bindings/user/:uid?namespace=<project identifier>
```

**Path parameter description**

| Parameter Name        | Required   | Description     | Required |
| ------------- | ------ | -------- | ---- |
| `uid` | string | User ID | Yes   |

**Query Parameter description**

| Parameter Name       | Required   | Description     | Required |
| ------------ | ------ | -------- | ---- |
| `namespace` | string | Project identifier | Yes   |

**Body Parameter description**

|Parameter Name|Description|Required|Required|
|----------------|-------------------|---|---|
|`roles`   | Role List | []string|Yes|

**Body Parameter example**

``` json
{
    "roles":
    [
        "prod-test",
        "read-project-only",
        "lilian"
    ]
}
```

**Return to the example successfully**

```json
{
  "message": "success"
}
```

## Delete Project Members

**Request**

```
DELETE /openapi/policy/role-bindings/user/:uid?namespace=<project identifier>
```

**Path parameter description**

| Parameter Name        | Required   | Description     | Required |
| ------------- | ------ | -------- | ---- |
| `uid` | string | User ID | Yes   |

**Query Parameter description**

| Parameter Name       | Required   | Description     | Required |
| ------------ | ------ | -------- | ---- |
| `namespace` | string | Project identifier | Yes   |

**Return to the example successfully**

```json
{
  "message": "success"
}
```


## Update Project User Group Member Role

**Request**

```
POST /openapi/policy/role-bindings/group/:gid?namespace=<project identifier>
```

**Path parameter description**

| Parameter Name        | Required   | Description     | Required |
| ------------- | ------ | -------- | ---- |
| `gid` | string | User group id | Yes   |

**Query Parameter description**

| Parameter Name       | Required   | Description     | Required |
| ------------ | ------ | -------- | ---- |
| `namespace` | string | Project identifier | Yes   |

**Body Parameter description**

|Parameter Name|Description|Required|Required|
|----------------|-------------------|---|---|
|`roles`   | Role List | []string|Yes|

**Body Parameter example**

``` json
{
    "roles":
    [
        "prod-test",
        "read-project-only",
        "lilian"
    ]
}
```

**Return to the example successfully**

```json
{
  "message": "success"
}
```

## Delete Project User Group Members

**Request**

```
DELETE /openapi/policy/role-bindings/group/:gid?namespace=<project identifier>
```

**Path parameter description**

| Parameter Name        | Required   | Description     | Required |
| ------------- | ------ | -------- | ---- |
| `gid` | string | User group id | Yes   |

**Query Parameter description**

| Parameter Name       | Required   | Description     | Required |
| ------------ | ------ | -------- | ---- |
| `namespace` | string | Project identifier | Yes   |

**Return to the example successfully**

```json
{
  "message": "success"
}
```