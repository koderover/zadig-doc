---
title: Project
date: 2023-04-17 21:14:39
permalink: /en/Zadig v3.4/api/project/
---

## Create a Project

### Create an Empty Project

> An empty project will be created without any service resources or environmental resources.

**Request**

```
POST /openapi/projects/project
```

**body Parameter description**

|Parameter Name|Description|Required|Required|Sample|
|----------------|-------------------|---|---|---|
|`project_name`  |Project Name|string|Yes| voting-app |
|`project_key`   |Project ID and naming rules are as follows:<br> Support lowercase letters and numbers, as well as mid-score `-`|string|Yes|voting-app|
|`is_public`     |Is it a public project?| bool|Yes|false|
|`description`   |Project Description|  string |No| Voting System|
|`project_type` |The item type, optional values are as follows:<br> `helm` (ie: Kubernetes Helm Chart item)<br> `yaml` (ie: Kubernetes YAML )<br> `loaded` (ie: Kubernetes hosted project)| string| Yes |yaml|

**Response**

```json
{
  "message": "success"
}
```



### Create a YAML Project and Initialize It

> Applicable to Kubernetes YAML type projects.

**Request**

```
POST /openapi/projects/project/init/yaml
```

**body Parameter description**

|Parameter Name|Description|Required|Required|
|----------------|-------------------|---|---|
|`project_name`  |Project Name|string|Yes|
|`project_key`   |Project ID and naming rules are as follows:<br> Support lowercase letters and numbers, as well as mid-score `-`|string|Yes|
|`project_type`  |Item type, fixed value `yaml`| string|Yes|
|`is_public`     |Is it a public project?| bool|Yes|
|`description`   |Project Description|  string |No|
|`service_list`  |Service List|  [][Service](#service) |Yes|
|`env_list`      |Environment list|  [][Env](#env) |Yes|

<h4 id="!">Service Parameter description</h4>

|Parameter Name|Description|Required|Required|
|---|---|---|---|
|`source`       |There are two sources for creating services:<br> `template` : Create a new service through templates<br> `yaml` : Create a new service through handwriting yaml|string|Yes|
|`template_name`|Name of the service template|string|`source` is required if `template` is|
|`variable_yaml`|Variables in service templates|[][KeyVal](#variable_yaml)|No|
|`auto_sync`    |Automatic synchronization switch, effective when `source` is `template`|bool|No|
|`service_name` |Service name| string|Yes|
|`yaml`         |YAML configuration for the service| string|`source` is required if `yaml` is|

<h4 id="!">Env Parameter description</h4>

|Parameter Name|Description|Required|Required|
|---|---|---|---|
|`env_key`|Environmental Identification|string|Yes|
|`cluster`|Cluster name|string|Yes|
|`namespace`|Namespace where the environment resides|string|Yes|

<h4 id="!">KeyVal Parameter description</h4>

|Parameter Name|Description|Required|Required|
|---|---|---|---|
|`key`|The key value of the variable|string|Yes|
|`value`|The value of the variable, if there is nested content, use the json format|any|Yes|

**body Parameter example**

Take creating project `demo` and initializing new service `myapp-1` and environment `dev` as an example:

``` json
{
    "project_name": "demo",
    "project_key": "demo",
    "project_type": "yaml",
    "is_public": true,
    "description": "demo project",
    "service_list": [
        {
            "source": "yaml",
            "service_name": "myapp-1",
            "yaml": "apiVersion: v1\nkind: Service\nmetadata:\n  name: a\n  labels:\n    app: a\nspec:\n  ports:\n  - name: http\n    port: 80\n    targetPort: 8080\n  selector:\n    app: a\n\n---\n\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: a\n  labels:\n    app: a\nspec:\n  selector:\n    matchLabels:\n      app: a\n  replicas: 1\n  template:\n    metadata:\n      labels:\n        app: a\n    spec:\n      containers:\n      - name: myapp-1\n        image: koderover.tencentcloudcr.com/koderover-demo/myapp-1:v0.1__linux_amd64\n        imagePullPolicy: Always\n        command: [\"/myapp-1\"]\n        args: [\"--downstream-addr\", \"$(DOWNSTREAM_ADDR)\", \"--headers\", \"$(HEADERS)\"]\n        env:\n          - name: DOWNSTREAM_ADDR\n            value: \"b\"\n          - name: HEADERS\n            value: \"x-request-id\"\n        ports:\n        - containerPort: 8080\n        resources:\n          limits:\n            cpu: 100m\n            memory: 100Mi\n"
        }
    ],
    "env_list": [
        {
            "env_key": "dev",
            "cluster_name": "dev",
            "namespace": "demo-env-dev"
        }
    ]
}
```

**Response**

```json
{
  "message": "success"
}
```



### Create a Helm Project and Initialize It

**Request**

```
POST /openapi/projects/project/init/helm
```

**body Parameter description**

| Parameter Name         | Description                                                         | Required                  | Required |
| -------------- | ------------------------------------------------------------ | --------------------- | ---- |
| `project_name` | Project Name                                                     | string                | Yes   |
| `project_key`  | Project ID and naming rules are as follows:<br> Support lowercase letters and numbers, as well as mid-score `-` | string                | Yes   |
| `is_public`    | Is it a public project?                                               | bool                  | Yes   |
| `description`  | Project Description                                                     | string                | No   |
| `service_list` | Service List                                                     | [][Service](#service) | Yes   |
| `env_list`     | Environment list                                                     | [][Env](#env)         | Yes   |

<h4 id="!">Service Parameter description</h4>

| Parameter Name          | Description                                        | Required                       | Required                          |
| --------------- | ------------------------------------------- | -------------------------- | ----------------------------- |
| `service_name`  | Service name                                    | string                     | Yes                            |
| `source`        | Service creation type, fixed value: `template`          | string                     | Yes                            |
| `template_name` | Name of the service template                              | string                     | `source` is required if `template` is |
| `variable_yaml` | Variables in service templates                            | [][KeyVal](#variable_yaml) | No                            |
| `auto_sync`     | Automatic synchronization switch, effective when `source` is `template` | bool                       | No                            |
| `values_yaml`   | Helm values file                            | string                     |                               |

<h4 id="!">Env Parameter description</h4>

| Parameter Name         | Description                      | Required   | Required |
| -------------- | ------------------------- | ------ | ---- |
| `env_key`      | Environmental Identification                  | string | Yes   |
| `cluster_name` | Cluster name                  | string | Yes   |
| `namespace`    | Namespace where the environment resides | string | Yes   |

<h4 id="!">KeyVal Parameter description</h4>

| Parameter Name  | Description                                     | Required   | Required |
| ------- | ---------------------------------------- | ------ | ---- |
| `key`   | The key value of the variable                               | string | Yes   |
| `value` | The value of the variable, if there is nested content, use the json format | any    | Yes   |

**body Parameter example**

```json
{
    "project_name":"helm project test2",
    "project_key":"test-helm-2",
    "is_public":true,
    "description":"test",
    "service_list":[
        {
            "source":"template",
            "service_name":"service33",
            "template_name":"minmin-helm-template",
            "variable_yaml":[{"key":"port","value":"7777"}],
            "values_yaml":"",
            "auto_sync":true
        }
    ],
    "env_list":[
        {
            "env_key":"dev1",
            "cluster_name":"local-20220823144517",
            "namespace":"test-helm-env-dev"
        }
    ]
}
```

**Response**

```json
{
  "message": "success"
}
```

## Get the Project List

**Request**

```
GET /openapi/projects/project?pageSize=<pageSize>&pageNum=<pageNum>
```

**Query Parameter description**

| Parameter Name     | Required | Description                         | Required |
| ---------- | ---- | ---------------------------- | ---- |
| `pageSize` | int  | Number of pages displayed per page, default value: 20 | No   |
| `pageNum`  | int  | The current number of pages of the page, default value: 1      | No   |

**Return Description**

| Parameter Name     | Required                    | Description     |
| ---------- | ----------------------- | -------- |
| `projects` | [][Project](#project-1) | Project List |
| `total`    | int                     | Total number of projects |

<h4 id="!">Project Parameter description</h4>

| Parameter Name         | Required   | Description                                                         |
| -------------- | ------ | ------------------------------------------------------------ |
| `project_name` | string | Project Name                                                     |
| `project_key`  | string | Project identifier                                                     |
| `deploy_type`  | string | Project deployment type:<br> `helm` : Kubernetes Helm Chart Project<brid="!"> `yaml` : Kubernetes YAML<brid="!"> `loaded` : Kubernetes hosted project |
| `desc`         | string | Project Description                                                     |

**Return to the example**

```json
{
    "total": 14,
    "projects": [
        {
            "project_name": "lilian-test",
            "project_key": "lilian-test",
            "description": "",
            "deploy_type":"k8s"
        },
        {
            "project_name": "release center",
            "project_key": "release-center",
            "description": "migrate from deploy center",
            "deploy_type":"k8s"
        }
    ]
}
```

## Get the Specified Project Details

**Request**

```
GET /openapi/projects/project/detail?projectKey=<project identifier>
```

**Query Parameter description**

| Parameter Name       | Required   | Description     | Required |
| ------------ | ------ | -------- | ---- |
| `projectKey` | string | Project identifier | Yes   |

**Return Description**

| Parameter Name         | Required   | Description                                                         |
| -------------- | ------ | ------------------------------------------------------------ |
| `project_name` | string | Project Name                                                     |
| `project_key`  | string | Project identifier                                                     |
| `deploy_type`  | string | Project deployment type:<br> `helm` : Kubernetes Helm Chart Project<brid="!"> `yaml` : Kubernetes YAML<brid="!"> `loaded` : Kubernetes hosted project |
| `desc`         | string | Project Description                                                     |
| `created_by`   | string | Creator                                                       |
| `created_time` | int    | creation time                                                     |

**Return to the example**

```json
{
    "project_name": "lilian-test",
    "project_key": "lilian-test",
    "desc": "",
    "deploy_type": "k8s",
    "create_time": 1686134245,
    "created_by": "admin",
}
```

## Delete the Project

**Request**

```
DELETE /openapi/projects/project?projectKey=<project identifier>&isDelete=<whether to delete project related resources>
```

**Query Parameter description**

| Parameter Name       | Required   | Description                                             | Required |
| ------------ | ------ | ------------------------------------------------ | ---- |
| `projectKey` | string | Project identifier                                         | Yes   |
| `isDelete`   | bool   | Whether to delete the Kubernetes namespace and services corresponding to the environment at the same time | Yes   |

**Successful return instructions**

```JSON
{message: "success"}
```