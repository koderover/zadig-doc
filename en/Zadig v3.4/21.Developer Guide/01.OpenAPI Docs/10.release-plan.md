---
title: Release Plan
date: 2023-09-04 09:32:04
permalink: /en/Zadig v3.4/api/release-plan/
---

This article mainly introduces how to use the Open API to operate Zadig's release plan.

## Release Plan

### Get a List of Release Plans

**Request**

```
GET /openapi/release_plan/v1
```

**Query**

| Parameter Name       | Required   | Description                    | Is it Required | Default Value |
| ------------ | ------ | ----------------------- | -------- | ------ |
| `pageNum`    | int    | Pagination parameters-current page count       | Trigger time, Unix timestamp       | None      |
| `pageSize`   | int    | Pagination parameters-the number of displayed items on the current page | Trigger time, Unix timestamp       | None     |

**Return Description**

| Parameter Name         | Required   | Description                                                         |
| -------------- | ------ | ------------------------------------------------------------ |
| `id`  | string |  Release plan primary key                                                    |
| `name` | string | Release plan name                                                  |
| `index`      | int    | Release plan number                                                 |
| `manager` | string |  Release person in charge                                             |
| `description` | string |   Requirement Relationship                                             |
| `create_time`  | int    | Release plan creation time                                           |
| `created_by` | string |   Created by                                             |

**Return normally**

```json
{
    "list": [
        {
            "id": "64f58a7ac573f7325c2744b6",
            "index": 31,
            "name": "test-workflow-0904",
            "manager": "admin",
            "description": "",
            "created_by": "admin",
            "create_time": 1693813370
        }
    ],
    "total": 26
}
```

###  Get Release Plan Details

**Request**

```
GET /openapi/release_plan/v1/:id
```

**Path parameter description**

| Parameter Name        | Required   | Description       | Is it Required | Default Value |
| ------------- | ------ | ---------- | -------- | ------ |
| `id` | string |  Release plan primary key | Trigger time, Unix timestamp       | None     |

**Return normally**

```json
{
    "id": "64f1a7cd1b7bd46ec353b50c",
    "index": 21,
    "name": "plan-A",
    "manager": "admin",
    "manager_id": "c565c7eb-e273-11ed-bef9-a659ed9f1ed1",
    "start_time": 1693558721, // 发布窗口期
    "end_time": 1694016000,   // 发布窗口期
    "description": "",
    "created_by": "admin",
    "create_time": 1693558733,
    "updated_by": "admin",
    "update_time": 1693558750,
    "approval": { // 审批配置
        "enabled": true,
        "status": "",
        "type": "native",
        "description": "",
        "native_approval": {
            "timeout": 5,
            "approve_users": [
                {
                    "user_id": "c565c7eb-e273-11ed-bef9-a659ed9f1ed1",
                    "user_name": "admin",
                    "reject_or_approve": "",
                    "comment": "",
                    "operation_time": 0
                }
            ],
            "needed_approvers": 1,
            "reject_or_approve": "",
            "instance_code": ""
        },
        "lark_approval": {
            "timeout": 5,
            "approval_id": "",
            "default_approval_initiator": null,
            "approve_users": [],
            "approval_nodes": [
                {
                    "approve_users": [],
                    "type": "AND",
                    "reject_or_approve": ""
                }
            ],
            "instance_code": ""
        },
        "dingtalk_approval": {
            "timeout": 5,
            "approval_id": "",
            "default_approval_initiator": null,
            "approval_nodes": [
                {
                    "approve_users": [],
                    "type": "AND",
                    "reject_or_approve": ""
                }
            ],
            "instance_code": ""
        }
    },
    "jobs": [
        {
            "id": "0b655ad6-5d08-4f1c-8ff6-7eb004c7c7bd",
            "name": "中间件变更",
            "type": "text",
            "spec": {
                "content": "<p>2222</p><p data-f-id=\"pbf\" style=\"text-align: center; font-size: 14px; margin-top: 30px; opacity: 0.65; font-family: sans-serif;\">Powered by <a href=\"https://www.froala.com/wysiwyg-editor?pb=1\" title=\"Froala Editor\">Froala Editor</a></p>"
            },
            "status": "",
            "last_status": "",
            "updated": true,
            "executed_by": "",
            "executed_time": 0
        }
    ],
    "status": "planning",
    "planning_time": 0,  // 完成规划状态的时间
    "approval_time": 0,  // 完成审批状态的时间
    "executing_time": 0, // 完成执行状态的时间
    "success_time": 0   // 成功时间
}
```

###  Create a Publishing Plan

**Request**

```
POST /openapi/release_plan/v1
```

**body Parameter description**

| Parameter Name        | Required   | Description       | Is it Required | Default Value |
| ------------- | ------ | ---------- | -------- | ------ |
| `name` | string | Release plan name                                                  |Trigger time, Unix timestamp|None|
| `manager` | string |  Publish the username of the person in charge                                             |Trigger time, Unix timestamp|None|
| `manager_identity_type` | string |  Release person in charge user type, system (default type), ldap, oauth, etc.                                            |Trigger time, Unix timestamp|None|
| `description` | string |   Requirement Relationship                                             |No|None|
| `start_time`    | int    | Release window period - start time       | No       | None      |
| `end_time`    | int    | Release window period - end time       | No       | None      |
| `approval` | approval |   Approval configuration, please refer to the section Create a custom workflow for specific fields.         | No       | None      |

**body Parameter example**

```json
{
    "name": "plan-example",
    "manager": "admin",
    "manager_identity_type": "system",
    "start_time": 1693558721, // 发布窗口期
    "end_time": 1694016000,   // 发布窗口期
    "description": "",
    "approval": { // 审批配置
        "enabled": true,
        "status": "",
        "type": "native",
        "description": "",
        "native_approval": {
            "timeout": 5,
            "approve_users": [
                {
                    "user_id": "c565c7eb-e273-11ed-bef9-a659ed9f1ed1",
                    "user_name": "admin",
                    "reject_or_approve": "",
                    "comment": "",
                    "operation_time": 0
                }
            ],
            "needed_approvers": 1,
            "reject_or_approve": "",
            "instance_code": ""
        }
    }
}
```